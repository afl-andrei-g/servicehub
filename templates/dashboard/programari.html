{% extends "dashboard/base.html" %}
{% block title %}ServiceHub - AcasƒÉ{% endblock %}
{% block content %}
<main class="main-content">
    {% include "dashboard/header.html" %}

    <div class="dashboard-content">
        <section class="dashboard-section vehicle-overview" id="cal">
            <div class="section-header">
                <h2>üìÖ Vezi programƒÉrile din aceastƒÉ lunƒÉ</h2>
            </div>
            <center>
                <div id="calendar" style="width: 75%;"></div>
            </center>
        </section>

        <section class="dashboard-section vehicle-overview">
            <div class="section-header" id="aloc">
                <h2>üóìÔ∏è Vezi toate programƒÉrile alocate</h2>
            </div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nume</th>
                            <th>Status</th>
                            <th>Programare</th>
                            <th>Ac»õiuni</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for i in services %}
                        <tr>
                            <td>{{i.id}}</td>
                            <td>
                                {{i.title}}
                            </td>
                            <td>{{i.f_status}}</td>
                            <td>{{i.date}}</td>
                            <td>
                                <div class="table-actions">
                                    <button class="btn-icon" onclick="window.location.href = '{{appurl}}/dashboard/service/{{i.id}}';"><i class="fas fa-eye"></i></button>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
          var calendarEl = document.getElementById('calendar');
          var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            locale: 'ro',
            events: [
              {% for i in services_this_month %}
                { title: '{{i.title}}', date: '{{i.start}}', url: '{{appurl}}/dashboard/service/{{i.id}}' },
              {% endfor %}
            ]
          });
          calendar.render();
        });
      </script>      
</main>
{% endblock %}